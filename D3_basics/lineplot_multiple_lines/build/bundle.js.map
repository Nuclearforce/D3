{"version":3,"file":"bundle.js","sources":["../src/scripts/colorLegend.js","../src/scripts/index.js"],"sourcesContent":["export const colorLegend = (selection, props) =>{\n    const {colorScale\n        ,circleRadius\n        ,spacing    \n        ,textOffset\n    } = props;\n\n    const groups = selection.selectAll('g')\n            .data(colorScale.domain());\n\n    const groupsEnter = groups\n        .enter().append('g')\n        .attr('class','tick');\n\n    groupsEnter.merge(groups)\n            .attr('transform',(d,i)=>\n                `translate(0,${i*spacing})`\n            )\n    groups.exit().remove();\n    \n    groupsEnter.append('circle')\n    .merge(groups.select('circle'))\n        .attr('r',circleRadius)\n        .attr('fill',colorScale);\n\n    groupsEnter.append('text')\n    .merge(groups.select('text'))\n        .text(d=>d)\n        .attr('dy','0.32em')\n        .attr('x',textOffset);\n    }","import {\n    select,\n    csv,\n    scaleLinear,\n    scaleTime,\n    scaleOrdinal,\n    extent,\n    axisLeft,\n    axisBottom,\n    line,\n    curveBasis,\n    nest,\n    schemeCategory10,\n    descending\n  } from 'd3';\n  \n  import { colorLegend } from './colorLegend';\n  const svg = select('svg');\n  \n  const width = +svg.attr('width');\n  const height = +svg.attr('height');\n  \n  const render = data => {\n    const title = 'A Week of Temperature Around the World';\n    \n    const xValue = d => d.timestamp;\n    const xAxisLabel = 'Time';\n    \n    const yValue = d => d.temperature;\n    const circleRadius = 6;\n    const yAxisLabel = 'Temperature';\n    \n    const colorValue = d => d.city;\n    \n    const margin = { top: 60, right: 190, bottom: 88, left: 105 };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    \n    const xScale = scaleTime()\n      .domain(extent(data, xValue))\n      .range([0, innerWidth])\n      .nice();\n    \n    const yScale = scaleLinear()\n      .domain(extent(data, yValue))\n      .range([innerHeight, 0])\n      .nice();\n    \n    const colorScale = scaleOrdinal(schemeCategory10);\n    \n    const g = svg.append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`);\n    \n    const xAxis = axisBottom(xScale)\n      .tickSize(-innerHeight)\n      .tickPadding(15);\n    \n    const yAxis = axisLeft(yScale)\n      .tickSize(-innerWidth)\n      .tickPadding(10);\n    \n    const yAxisG = g.append('g').call(yAxis);\n    yAxisG.selectAll('.domain').remove();\n    \n    yAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('y', -60)\n        .attr('x', -innerHeight / 2)\n        .attr('fill', 'black')\n        .attr('transform', `rotate(-90)`)\n        .attr('text-anchor', 'middle')\n        .text(yAxisLabel);\n    \n    const xAxisG = g.append('g').call(xAxis)\n      .attr('transform', `translate(0,${innerHeight})`);\n    \n    xAxisG.select('.domain').remove();\n    \n    xAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('y', 80)\n        .attr('x', innerWidth / 2)\n        .attr('fill', 'black')\n        .text(xAxisLabel);\n    \n    const lineGenerator = line()\n      .x(d => xScale(xValue(d)))\n      .y(d => yScale(yValue(d)))\n      .curve(curveBasis);\n    \n    const lastYValue = d =>\n      yValue(d.values[d.values.length - 1]);\n    \n    const nested = nest()\n      .key(colorValue)\n      .entries(data)\n      .sort((a, b) =>\n        descending(lastYValue(a), lastYValue(b))\n      );\n    \n    console.log(nested);\n    \n    colorScale.domain(nested.map(d => d.key));\n    \n    g.selectAll('.line-path').data(nested)\n      .enter().append('path')\n        .attr('class', 'line-path')\n        .attr('d', d => lineGenerator(d.values))\n        .attr('stroke', d => colorScale(d.key));\n    \n    g.append('text')\n        .attr('class', 'title')\n        .attr('y', -10)\n        .text(title);\n    \n    svg.append('g')\n      .attr('transform', `translate(795,121)`)\n      .call(colorLegend, {\n        colorScale,\n        circleRadius: 13,\n        spacing: 30,\n        textOffset: 15\n      });\n  };\n  \n  csv('https://vizhub.com/curran/datasets/data-canvas-sense-your-city-one-week.csv')\n    .then(data => {\n      data.forEach(d => {\n        d.temperature = +d.temperature;\n        d.timestamp = new Date(d.timestamp);\n      });\n      render(data);\n    });"],"names":["select","scaleTime","extent","scaleLinear","scaleOrdinal","schemeCategory10","axisBottom","axisLeft","line","curveBasis","nest","descending","csv"],"mappings":"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"}